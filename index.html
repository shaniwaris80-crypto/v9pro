<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARSLAN PRO V9</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <!-- Librer√≠as -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <!-- Splash -->
  <div id="splash">
    <img src="logo-kiwi.png" alt="Kiwi">
    <h2>ARSLAN PRO V9</h2>
  </div>

  <!-- Header -->
  <header>
    <div class="brand">
      <img src="logo-kiwi.png" alt="Kiwi">
      <h1>ARSLAN PRO V9</h1>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="tabs">
    <button class="tab active" data-tab="factura">Factura</button>
    <button class="tab" data-tab="clientes">Clientes</button>
    <button class="tab" data-tab="facturas">Facturas</button>
    <button class="tab" data-tab="productos">Productos</button>
    <button class="tab" data-tab="resumen">Resumen</button>
  </nav>

  <main>
    <!-- FACTURA -->
    <section class="panel active" data-tab-panel="factura">
      <h2>Factura</h2>

      <div class="row gap">
        <div class="card">
          <h3>Proveedor</h3>
          <div class="grid2">
            <label>Nombre <input id="provNombre" placeholder="Tu empresa"></label>
            <label>NIF/CIF <input id="provNif"></label>
            <label>Direcci√≥n <input id="provDir"></label>
            <label>Tel√©fono <input id="provTel"></label>
            <label>Email <input id="provEmail" type="email"></label>
          </div>
        </div>

        <div class="card">
          <h3>Cliente</h3>
          <div class="grid2">
            <label>Seleccionar
              <select id="selCliente"></select>
            </label>
            <button id="btnNuevoCliente" class="btn green">Ir a Clientes</button>
            <label>Nombre <input id="cliNombre"></label>
            <label>NIF/CIF <input id="cliNif"></label>
            <label>Direcci√≥n <input id="cliDir"></label>
            <label>Tel√©fono <input id="cliTel"></label>
            <label>Email <input id="cliEmail" type="email"></label>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>L√≠neas</h3>

        <div class="linea-head">
          <div>Producto</div>
          <div>Modo</div>
          <div>Cant.</div>
          <div>Bruto kg</div>
          <div>Tara kg</div>
          <div>Neto kg</div>
          <div>Precio</div>
          <div>Origen</div>
          <div>Importe</div>
          <div></div>
        </div>
        <div id="lineas"></div>

        <div class="row-between">
          <div class="row gap">
            <button id="btnAddLinea" class="btn">‚ûï A√±adir l√≠nea</button>
            <button id="btnVaciarLineas" class="btn ghost">üßπ Vaciar</button>
          </div>
          <div class="row gap">
            <label class="check"><input type="checkbox" id="chkTransporte"> +10% Transporte</label>
            <label class="check"><input type="checkbox" id="chkIvaIncluido" checked> IVA 4% (informativo)</label>
          </div>
        </div>
      </div>

      <div class="row gap">
        <div class="card">
          <h3>Estado de pago</h3>
          <div class="grid3">
            <label>Estado
              <select id="estado">
                <option value="pendiente">Pendiente</option>
                <option value="parcial">Parcial</option>
                <option value="pagado">Pagado</option>
              </select>
            </label>
            <label>Pagado <input id="pagado" type="number" step="0.01" min="0" value="0"></label>
            <label>M√©todo
              <select id="metodoPago">
                <option>Efectivo</option>
                <option>Tarjeta</option>
                <option>Transferencia</option>
                <option>Bizum</option>
              </select>
            </label>
          </div>
          <label>Observaciones
            <textarea id="observaciones" rows="2" placeholder="Notas internas (no se imprimen)"></textarea>
          </label>
        </div>

        <div class="card totals">
          <h3>Totales</h3>
          <div class="grid2 compact">
            <div>Subtotal:</div><div id="subtotal" class="num">0,00 ‚Ç¨</div>
            <div>Transporte:</div><div id="transp" class="num">0,00 ‚Ç¨</div>
            <div>IVA 4%:</div><div id="iva" class="num">0,00 ‚Ç¨</div>
            <div>Total:</div><div id="total" class="num big">0,00 ‚Ç¨</div>
            <div>Pagado:</div><div id="mostPagado" class="num">0,00 ‚Ç¨</div>
            <div>Pendiente:</div><div id="pendiente" class="num warn">0,00 ‚Ç¨</div>
          </div>
          <div class="row gap">
            <button id="btnGuardar" class="btn green">üíæ Guardar</button>
            <button id="btnImprimir" class="btn">üñ®Ô∏è PDF</button>
            <button id="btnNueva" class="btn ghost">üÜï Nueva</button>
          </div>
        </div>
      </div>

      <!-- Panel de historial de precios -->
      <div id="pricePanel" hidden>
        <div class="pp-title">Historial de precios</div>
        <div id="ppBody"></div>
      </div>

      <!-- √Årea imprimible -->
      <section id="printArea" class="print-area">
        <div class="p-head">
          <div>
            <h2>Factura <span id="p-num">(Sin guardar)</span></h2>
            <div>Fecha: <span id="p-fecha"></span></div>
          </div>
          <img src="logo-kiwi.png" alt="logo" />
        </div>

        <div class="p-cols">
          <div>
            <h4>Proveedor</h4>
            <div id="p-prov"></div>
          </div>
          <div>
            <h4>Cliente</h4>
            <div id="p-cli"></div>
          </div>
        </div>

        <table id="p-tabla">
          <thead>
            <tr>
              <th>Producto</th><th>Modo</th><th>Cant.</th><th>Neto kg</th><th>Precio</th><th>Origen</th><th>Importe</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div class="p-totals">
          <div>Subtotal: <strong id="p-sub"></strong></div>
          <div>Transporte: <strong id="p-tra"></strong></div>
          <div>IVA 4%: <strong id="p-iva"></strong></div>
          <div>Total: <strong id="p-tot"></strong></div>
          <div>Estado: <strong id="p-estado"></strong></div>
          <div>M√©todo: <strong id="p-metodo"></strong></div>
          <div>Obs: <em id="p-obs"></em></div>
        </div>
      </section>
    </section>

    <!-- CLIENTES -->
    <section class="panel" data-tab-panel="clientes">
      <div class="row-between v-center">
        <h2>Clientes</h2>
        <div class="row gap">
          <input id="buscarCliente" placeholder="üîç Buscar cliente..." />
          <button id="btnAddCliente" class="btn">‚ûï A√±adir</button>
          <button id="btnExportClientes" class="btn ghost">‚¨áÔ∏è Exportar</button>
          <button id="btnImportClientes" class="btn ghost">‚¨ÜÔ∏è Importar</button>
        </div>
      </div>
      <div id="listaClientes" class="list"></div>
    </section>

    <!-- FACTURAS -->
    <section class="panel" data-tab-panel="facturas">
      <div class="row-between v-center">
        <h2>Facturas</h2>
        <div class="row gap">
          <select id="filtroEstado">
            <option value="todas">Todas</option>
            <option value="pendiente">Pendiente</option>
            <option value="parcial">Parcial</option>
            <option value="pagado">Pagado</option>
          </select>
          <input id="buscaCliente" placeholder="üîç Cliente..." />
          <button id="btnExportFacturas" class="btn ghost">‚¨áÔ∏è Exportar</button>
          <button id="btnImportFacturas" class="btn ghost">‚¨ÜÔ∏è Importar</button>
        </div>
      </div>
      <div id="listaFacturas" class="list"></div>
    </section>

    <!-- PRODUCTOS -->
    <section class="panel" data-tab-panel="productos">
      <h2>Productos</h2>
      <div id="listaProductos"></div>
    </section>

    <!-- RESUMEN -->
    <section class="panel" data-tab-panel="resumen">
      <div class="row-between v-center">
        <h2>Resumen</h2>
        <div class="row gap">
          <button id="btnResetCliente" class="btn ghost">Reset deuda cliente</button>
          <button id="btnResetGlobal" class="btn ghost">Reset deudas global</button>
          <button id="btnBackup" class="btn">üíæ Backup</button>
          <button id="btnRestore" class="btn">‚§¥Ô∏è Restaurar</button>
        </div>
      </div>

      <div class="cards4">
        <div class="kpi"><div>Hoy</div><strong id="rHoy">0,00 ‚Ç¨</strong></div>
        <div class="kpi"><div>Semana</div><strong id="rSemana">0,00 ‚Ç¨</strong></div>
        <div class="kpi"><div>Mes</div><strong id="rMes">0,00 ‚Ç¨</strong></div>
        <div class="kpi"><div>Total</div><strong id="rTotal">0,00 ‚Ç¨</strong></div>
      </div>

      <div class="card">
        <h3>Deuda global</h3>
        <div id="resGlobal" class="num big">0,00 ‚Ç¨</div>
      </div>

      <div class="row gap">
        <div class="card w50">
          <h3>Deuda por cliente</h3>
          <div id="resPorCliente" class="list"></div>
        </div>
        <div class="card w50">
          <h3>Ventas diarias (7d)</h3>
          <canvas id="chartDiario" height="140"></canvas>
        </div>
      </div>

      <div class="card">
        <h3>Ventas mensuales (12m)</h3>
        <canvas id="chartMensual" height="160"></canvas>
      </div>
    </section>
  </main>

  <script src="app.js" defer></script>
</body>
</html>
